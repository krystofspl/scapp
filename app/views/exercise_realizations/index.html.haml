%p#notice= notice
- content_for :heading do
  = "#{t('exercise_realizations.index.heading')}"
- breadcrumb :regular_training_lesson_realizations_plans, @training_lesson_realization

#left-pane-container.col-xs-6.col-sm-6.col-lg-4
  #left-pane
    .box.box-primary
      .box-body
        #exercises
          %ul.nav.nav-tabs
            %li.active
              = link_to t('exercise.index.exercises'), '#exercises-list', {:data => {'toggle' => 'tab'}}
            %li
              = link_to t('favorite_plan.index.favorite_plans'), '#favorite-plans', {:data => {'toggle' => 'tab'}}
          .tab-content
            #exercises-list.tab-pane.fade.in.active
              = render partial: 'list_exercises', locals: {:exercises => @exercises, :filterrific => @filterrific}
            #favorite-plans.tab-pane.fade
        #settings
          %ul.nav.nav-tabs
            %li.active
              = link_to t('exercise_realizations.form.heading'), '#realization-settings', {:data => {'toggle' => 'tab'}}
            %li#realization-setups-tab-button
              = link_to t('exercise_realization_setups.form.heading'), '#realization-setups', {:data => {'toggle' => 'tab'}}
              -# clicking this triggers ajax load of edit partial
            %li#realization-sets-tab-button
              = link_to t('exercise_set_realization.form.heading'), '#realization-sets', {:data => {'toggle' => 'tab'}}
          .tab-content
            #realization-settings.tab-pane.fade.in.active
            #realization-setups.tab-pane.fade
            #realization-sets.tab-pane.fade
      %br{:style=>'clear:both;'}

.col-xs-6.col-sm-6.col-lg-8
  #right-pane.box.box-primary
    .box-body
      .owl-carousel-before
        .owl-carousel-prev.fa.fa-arrow-left.fa-2x
      -#
          - tlr_time = @training_lesson_realization.from
          - tlr_until = @training_lesson_realization.until
          - while tlr_time <= tlr_until
            .dynamic-size-time
              = tlr_time.strftime("%H:%M")
            - tlr_time+=300
      .owl-carousel#owl-carousel
        - plans = @training_lesson_realization.plans.sort do |a,b|
          - comp = (a.user_partook.last_name <=> b.user_partook.last_name)
          - comp.zero? ? (a.user_partook.first_name <=> b.user_partook.first_name) : comp
          - #TODO utf8 chars se radi na konec, pridat gem
        - plans.each do |plan|
          - player = plan.user_partook
          %div.player-plan-wrapper.box
            %h4.box-title
              .title
                -# avatar?
                = player
            .box-body
              %ul.player-plan{:id => "player-#{player.id}", :data => {'plan-id' => plan.id}}
                - plan.ordered_realizations.each do |realization|
                  %li.realization{:data => {'realization-id' => realization.id}}
                    = render partial: 'exercise_realizations/detail_short', locals: {:realization => realization}
      .owl-carousel-after
        .owl-carousel-next.fa.fa-arrow-right.fa-2x
      %br{:style=>'clear:both;'}
%br{:style=>'clear:both;'}

= render partial: 'index.js.haml'